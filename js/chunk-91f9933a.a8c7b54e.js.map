{"version":3,"sources":["webpack:///./src/components/Widgets/PiHoleStats.vue?8050","webpack:///./src/components/Widgets/PiHoleStats.vue?b9d0","webpack:///src/components/Widgets/PiHoleStats.vue","webpack:///./src/components/Widgets/PiHoleStats.vue?d7e9","webpack:///./src/components/Widgets/PiHoleStats.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","$t","class","getStatusColor","status","_f","_e","attrs","chartId","_l","row","inx","key","lbl","val","staticRenderFns","mixins","components","data","dataTable","blockPercentChart","computed","hostname","endpoint","hideStatus","hideChart","hideInfo","filters","capitalize","str","methods","fetchData","then","processData","generateBlockPie","blockedToday","labels","datasets","values","title","type","height","strokeWidth","colors","tooltipOptions","formatTooltipY","component"],"mappings":"kHAAA,W,2CCAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,yBAAyB,CAAEN,EAAU,OAAEI,EAAG,MAAM,CAACE,YAAY,UAAU,CAACF,EAAG,OAAO,CAACE,YAAY,cAAc,CAACN,EAAIO,GAAGP,EAAIQ,GAAGR,EAAIS,GAAG,mCAAmC,OAAOL,EAAG,OAAO,CAACM,MAAO,cAAiBV,EAAIW,eAAeX,EAAIY,SAAW,CAACZ,EAAIO,GAAGP,EAAIQ,GAAGR,EAAIa,GAAG,aAAPb,CAAqBA,EAAIY,cAAcZ,EAAIc,KAAKV,EAAG,IAAI,CAACE,YAAY,YAAYS,MAAM,CAAC,GAAKf,EAAIgB,WAAYhB,EAAa,UAAEI,EAAG,MAAM,CAACE,YAAY,cAAcN,EAAIiB,GAAIjB,EAAa,WAAE,SAASkB,EAAIC,GAAK,OAAOf,EAAG,MAAM,CAACgB,IAAID,EAAIb,YAAY,kBAAkB,CAACF,EAAG,IAAI,CAACE,YAAY,aAAa,CAACN,EAAIO,GAAGP,EAAIQ,GAAGU,EAAIG,QAAQjB,EAAG,IAAI,CAACE,YAAY,aAAa,CAACN,EAAIO,GAAGP,EAAIQ,GAAGU,EAAII,aAAY,GAAGtB,EAAIc,QACtvBS,EAAkB,G,gDCwBP,GACfC,uBACAC,cACAC,KAHA,WAIA,OACAd,YACAe,eACAC,yBAGAC,UAEAC,SAFA,WAGA,4BAEA,OADA,uEACA,qBAEAC,SAPA,WAQA,iDAEAC,WAVA,WAUA,gCACAC,UAXA,WAWA,+BACAC,SAZA,WAYA,+BAEAC,SACAC,WADA,SACAC,GACA,2BAGAC,SAEAC,UAFA,WAEA,WACA,gCACAC,MAAA,YACA,qBAIAC,YATA,SASAf,GAaA,GAZA,kBACA,sBAEA,gBACA,gBACA,CAAAL,qBAAAC,iEACA,CAAAD,wBAAAC,yBACA,CAAAD,wBAAAC,yBACA,CAAAD,wBAAAC,6BACA,CAAAD,4BAAAC,gCAGA,gBACA,yCACA,2BAGAX,eA3BA,SA2BAC,GACA,4BACA,qBACA,QAGA8B,iBAjCA,SAiCAC,GACA,OACAC,6BACAC,WACAC,oBAGA,gDACAC,sBACArB,OACAsB,aACAC,WACAC,eACAC,6BACAC,gBACAC,2BAAA,0CCtGoW,I,wBCQhWC,EAAY,eACd,EACAvD,EACAwB,GACA,EACA,KACA,WACA,MAIa,aAAA+B,E","file":"js/chunk-91f9933a.a8c7b54e.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PiHoleStats.vue?vue&type=style&index=0&id=651cc716&scoped=true&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"pi-hole-stats-wrapper\"},[(_vm.status)?_c('div',{staticClass:\"status\"},[_c('span',{staticClass:\"status-lbl\"},[_vm._v(_vm._s(_vm.$t('widgets.pi-hole.status-heading'))+\":\")]),_c('span',{class:(\"status-val \" + (_vm.getStatusColor(_vm.status)))},[_vm._v(_vm._s(_vm._f(\"capitalize\")(_vm.status)))])]):_vm._e(),_c('p',{staticClass:\"block-pie\",attrs:{\"id\":_vm.chartId}}),(_vm.dataTable)?_c('div',{staticClass:\"data-table\"},_vm._l((_vm.dataTable),function(row,inx){return _c('div',{key:inx,staticClass:\"data-table-row\"},[_c('p',{staticClass:\"row-label\"},[_vm._v(_vm._s(row.lbl))]),_c('p',{staticClass:\"row-value\"},[_vm._v(_vm._s(row.val))])])}),0):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n<div class=\"pi-hole-stats-wrapper\">\n  <!-- Current Status -->\n  <div v-if=\"status\" class=\"status\">\n    <span class=\"status-lbl\">{{ $t('widgets.pi-hole.status-heading') }}:</span>\n    <span :class=\"`status-val ${getStatusColor(status)}`\">{{ status | capitalize }}</span>\n  </div>\n  <!-- Block Pie Chart -->\n  <p :id=\"chartId\" class=\"block-pie\"></p>\n  <!-- More Data -->\n  <div v-if=\"dataTable\" class=\"data-table\">\n    <div class=\"data-table-row\" v-for=\"(row, inx) in dataTable\" :key=\"inx\" >\n      <p class=\"row-label\">{{ row.lbl }}</p>\n      <p class=\"row-value\">{{ row.val }}</p>\n    </div>\n  </div>\n</div>\n</template>\n\n<script>\n// import axios from 'axios';\nimport WidgetMixin from '@/mixins/WidgetMixin';\nimport ChartingMixin from '@/mixins/ChartingMixin';\nimport { capitalize } from '@/utils/MiscHelpers';\n\nexport default {\n  mixins: [WidgetMixin, ChartingMixin],\n  components: {},\n  data() {\n    return {\n      status: null,\n      dataTable: null,\n      blockPercentChart: null,\n    };\n  },\n  computed: {\n    /* Let user select which comic to display: random, latest or a specific number */\n    hostname() {\n      const usersChoice = this.options.hostname;\n      if (!usersChoice) this.error('You must specify the hostname for your Pi-Hole server');\n      return usersChoice || 'http://pi.hole';\n    },\n    endpoint() {\n      return `${this.hostname}/admin/api.php`;\n    },\n    hideStatus() { return this.options.hideStatus; },\n    hideChart() { return this.options.hideChart; },\n    hideInfo() { return this.options.hideInfo; },\n  },\n  filters: {\n    capitalize(str) {\n      return capitalize(str);\n    },\n  },\n  methods: {\n    /* Make GET request to local pi-hole instance */\n    fetchData() {\n      this.makeRequest(this.endpoint)\n        .then((response) => {\n          this.processData(response);\n        });\n    },\n    /* Assign data variables to the returned data */\n    processData(data) {\n      if (!this.hideStatus) {\n        this.status = data.status;\n      }\n      if (!this.hideInfo) {\n        this.dataTable = [\n          { lbl: 'Active Clients', val: `${data.unique_clients}/${data.clients_ever_seen}` },\n          { lbl: 'Ads Blocked Today', val: data.ads_blocked_today },\n          { lbl: 'DNS Queries Today', val: data.dns_queries_today },\n          { lbl: 'Total DNS Queries', val: data.dns_queries_all_types },\n          { lbl: 'Domains on Block List', val: data.domains_being_blocked },\n        ];\n      }\n      if (!this.hideChart) {\n        const blockedToday = Math.round(data.ads_percentage_today);\n        this.generateBlockPie(blockedToday);\n      }\n    },\n    getStatusColor(status) {\n      if (status === 'enabled') return 'green';\n      if (status === 'disabled') return 'red';\n      else return 'blue';\n    },\n    /* Generate pie chart showing the proportion of queries blocked */\n    generateBlockPie(blockedToday) {\n      const chartData = {\n        labels: ['Blocked', 'Allowed'],\n        datasets: [{\n          values: [blockedToday, 100 - blockedToday],\n        }],\n      };\n      return new this.Chart(`#${this.chartId}`, {\n        title: 'Block Percent',\n        data: chartData,\n        type: 'donut',\n        height: 250,\n        strokeWidth: 18,\n        colors: ['#f80363', '#20e253'],\n        tooltipOptions: {\n          formatTooltipY: d => `${Math.round(d)}%`,\n        },\n      });\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n.pi-hole-stats-wrapper {\n  display: flex;\n  flex-direction: column;\n  .status {\n    margin: 0.5rem 0;\n    .status-lbl {\n      color: var(--widget-text-color);\n      font-weight: bold;\n    }\n    .status-val {\n      margin-left: 0.5rem;\n      font-family: var(--font-monospace);\n      &.green { color: var(--success); }\n      &.red { color: var(--danger); }\n      &.blue { color: var(--info); }\n    }\n  }\n  img.block-percent-chart {\n    margin: 0.5rem auto;\n    max-width: 8rem;\n    width: 100%;\n  }\n  .block-pie {\n    margin: 0;\n  }\n  .data-table {\n    display: flex;\n    flex-direction: column;\n    .data-table-row {\n      display: flex;\n      justify-content: space-between;\n      p {\n        margin: 0.2rem 0;\n        color: var(--widget-text-color);\n        font-size: 0.9rem;\n        &.row-value {\n          font-family: var(--font-monospace);\n        }\n      }\n      &:not(:last-child) {\n        border-bottom: 1px dashed var(--widget-text-color);\n      }\n    }\n  }\n}\n\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PiHoleStats.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PiHoleStats.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PiHoleStats.vue?vue&type=template&id=651cc716&scoped=true&\"\nimport script from \"./PiHoleStats.vue?vue&type=script&lang=js&\"\nexport * from \"./PiHoleStats.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PiHoleStats.vue?vue&type=style&index=0&id=651cc716&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"651cc716\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}