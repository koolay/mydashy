{"version":3,"sources":["webpack:///./src/components/Widgets/PiHoleTraffic.vue?43d9","webpack:///src/components/Widgets/PiHoleTraffic.vue","webpack:///./src/components/Widgets/PiHoleTraffic.vue?21d7","webpack:///./src/components/Widgets/PiHoleTraffic.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","chartId","staticRenderFns","mixins","components","data","status","dataTable","blockPercentChart","computed","hostname","endpoint","methods","fetchData","then","validate","response","processData","Object","timeData","domainsData","adsData","labels","datasets","name","type","values","generateChart","chartData","title","height","colors","truncateLegends","lineOptions","regionFill","hideDots","axisOptions","xIsSeries","xAxisMode","component"],"mappings":"uHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,kBAAkBC,MAAM,CAAC,GAAKP,EAAIQ,YACpJC,EAAkB,G,wDCOP,GACfC,uBACAC,cACAC,KAHA,WAIA,OACAC,YACAC,eACAC,yBAGAC,UAEAC,SAFA,WAGA,4BAEA,OADA,uEACA,qBAEAC,SAPA,WAQA,qEAGAC,SAEAC,UAFA,WAEA,WACA,gCACAC,MAAA,YACA,eACA,qBAIAC,SAVA,SAUAC,GACA,8CAGA,4BACA,yEACA,IAJA,2DACA,IAQAC,YArBA,SAqBAZ,GAAA,WACA,KACA,KACAa,sDACAC,4BACAC,kCAEA,SACAF,kDACAG,8BAEA,OACAC,SACAC,UACA,CAAAC,eAAAC,WAAAC,UACA,CAAAF,mBAAAC,WAAAC,YAGA,uBAEAC,cAzCA,SAyCAC,GACA,gDACAC,6BACAxB,OACAoB,kBACAK,wBACAC,6BACAC,mBACAC,aACAC,aACAC,YAEAC,aACAC,aACAC,uBCpFsW,I,YCOlWC,EAAY,eACd,EACA/C,EACAU,GACA,EACA,KACA,KACA,MAIa,aAAAqC,E","file":"js/chunk-2d225b78.8cc06a08.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"pi-hole-traffic\",attrs:{\"id\":_vm.chartId}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div :id=\"chartId\" class=\"pi-hole-traffic\"></div>\n</template>\n\n<script>\nimport WidgetMixin from '@/mixins/WidgetMixin';\nimport ChartingMixin from '@/mixins/ChartingMixin';\n\nexport default {\n  mixins: [WidgetMixin, ChartingMixin],\n  components: {},\n  data() {\n    return {\n      status: null,\n      dataTable: null,\n      blockPercentChart: null,\n    };\n  },\n  computed: {\n    /* Let user select which comic to display: random, latest or a specific number */\n    hostname() {\n      const usersChoice = this.options.hostname;\n      if (!usersChoice) this.error('You must specify the hostname for your Pi-Hole server');\n      return usersChoice || 'http://pi.hole';\n    },\n    endpoint() {\n      return `${this.hostname}/admin/api.php?overTimeData10mins`;\n    },\n  },\n  methods: {\n    /* Make GET request to local pi-hole instance */\n    fetchData() {\n      this.makeRequest(this.endpoint)\n        .then((response) => {\n          if (this.validate(response)) {\n            this.processData(response);\n          }\n        });\n    },\n    validate(response) {\n      if (!response.ads_over_time || !response.domains_over_time) {\n        this.error('Expected data was not returned from Pi-Hole');\n        return false;\n      } else if (response.ads_over_time.length < 1) {\n        this.error('Request completed succesfully, but no data in Pi-Hole yet');\n        return false;\n      }\n      return true;\n    },\n    /* Assign data variables to the returned data */\n    processData(data) {\n      const timeData = [];\n      const domainsData = [];\n      Object.keys(data.domains_over_time).forEach((time) => {\n        timeData.push(this.formatTime(time * 1000));\n        domainsData.push(data.domains_over_time[time]);\n      });\n      const adsData = [];\n      Object.keys(data.ads_over_time).forEach((time) => {\n        adsData.push(data.ads_over_time[time]);\n      });\n      const chartData = {\n        labels: timeData,\n        datasets: [\n          { name: 'Queries', type: 'bar', values: domainsData },\n          { name: 'Ads Blocked', type: 'bar', values: adsData },\n        ],\n      };\n      this.generateChart(chartData);\n    },\n    generateChart(chartData) {\n      return new this.Chart(`#${this.chartId}`, {\n        title: 'Recent Queries & Ads',\n        data: chartData,\n        type: 'axis-mixed',\n        height: this.chartHeight,\n        colors: ['#20e253', '#f80363'],\n        truncateLegends: true,\n        lineOptions: {\n          regionFill: 1,\n          hideDots: 1,\n        },\n        axisOptions: {\n          xIsSeries: true,\n          xAxisMode: 'tick',\n        },\n      });\n    },\n  },\n};\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PiHoleTraffic.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PiHoleTraffic.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PiHoleTraffic.vue?vue&type=template&id=78312b68&\"\nimport script from \"./PiHoleTraffic.vue?vue&type=script&lang=js&\"\nexport * from \"./PiHoleTraffic.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}